(()=>{"use strict";(()=>{const t="https://jsonplaceholder.typicode.com/posts";const e=document.getElementById("creation_form"),n=document.getElementById("post_ul");fetch(t+"?_limit=10").then((t=>t.json())).catch((t=>console.log(t))).then((t=>{!function(t){n.innerHTML="",t.forEach((t=>{const e=document.createElement("li");e.dataset.id=t.id,e.className="post-li",e.innerHTML=`<p class="title-post">${t.title}</p><p class="body-post">${t.body}</p><button class="upload-comments">Загрузить комментарии</button>`,n.appendChild(e)}))}(t)})),e.addEventListener("submit",(function(e){e.preventDefault();const o=document.getElementById("form_title").value.trim(),c=document.getElementById("form_body").value.trim();o&&c&&function({title:e,body:n}){return fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:e,body:n,postId:1})}).then((t=>(201===t.status&&console.log("Пост створено успішно"),t.json()))).catch((t=>console.error("Error:",t)))}({title:o,body:c}).then((t=>{!function(t){const e=document.createElement("li");e.dataset.id=t.id,e.className="post-li",e.innerHTML=`<p class="title-post">${t.title}</p><p class="body-post">${t.body}</p><button class="upload-comments">Загрузить комментарии</button>`,n.appendChild(e)}(t)}))})),n.addEventListener("click",(function(e){if(e.preventDefault(),e.target.classList.contains("upload-comments")){const n=e.target.parentElement.dataset.id;(function(e){return fetch(t+`/${e}/comments?_limit=2`).then((t=>t.json())).catch((t=>console.log(t)))})(n).then((t=>{!function(t,e){const n=document.querySelector(`[data-id='${t}']`);e.forEach((t=>{const e=document.createElement("div");e.className="comment",e.innerHTML=`<p class="comment-name">${t.name}</p><p class="comment-email">${t.email}</p><p class="comment-body">${t.body}</p>`,n.appendChild(e)}))}(n,t)}))}}))})()})();